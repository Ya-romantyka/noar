"use client";

import React, { useEffect, useRef } from "react";
import fluidCursor from "@/app/hooks/useFluidCursor";
import styles from "./Logo-anim-about-component.module.scss";
import clsx from "clsx";

interface IProps {
    className?: string;
}

export default function LogoAnimAboutComponent({ className }: IProps) {
    useEffect(() => {
        fluidCursor();
    }, []);

    const idsRef = useRef<{
        blackGradientId: string;
        letterMaskId: string;
        strokeGradientId: string;
    } | null>(null);

    if (!idsRef.current) {
        const uid = Math.random().toString(36).slice(2);
        idsRef.current = {
            blackGradientId: `blackGradient-${uid}`,
            letterMaskId: `letterMask-${uid}`,
            strokeGradientId: `strokeGradient-${uid}`,
        };
    }

    const { blackGradientId, letterMaskId, strokeGradientId } = idsRef.current;

    useEffect(() => {
        const grad = document.getElementById(
            strokeGradientId
        ) as SVGLinearGradientElement | null;
        if (!grad) return;

        const reduceMotion =
            typeof window !== "undefined" &&
            window.matchMedia &&
            window.matchMedia("(prefers-reduced-motion: reduce)").matches;

        const DURATION = 10_000;
        let raf = 0;

        if (reduceMotion) {
            grad.setAttribute("gradientTransform", `translate(0 0)`);
            return;
        }

        const loop = (t0: number) => (now: number) => {
            const elapsed = (now - t0) % DURATION;
            const p = elapsed / DURATION;
            const x = 1 - 2 * p;
            const y = -1 + 2 * p;
            grad.setAttribute("gradientTransform", `translate(${x} ${y})`);
            raf = requestAnimationFrame(loop(t0));
        };

        raf = requestAnimationFrame(loop(performance.now()));
        return () => cancelAnimationFrame(raf);
    }, [strokeGradientId]);

    return (
        <div className={clsx(styles.logo, className)}>
            <canvas id="fluid" className={styles.canvas} />

            <svg
                width="1000"
                height="700"
                viewBox="0 0 1000 700"
                preserveAspectRatio="xMidYMid meet"
                style={{ position: "absolute", inset: 0, zIndex: 2 }}
                aria-hidden
            >
                <defs>
                    <linearGradient id={blackGradientId} x1="0" y1="0" x2="0" y2="1">
                        <stop offset="0%" stopColor="#101010" stopOpacity="0.7" />
                        <stop offset="100%" stopColor="#101010" stopOpacity="0.7" />
                    </linearGradient>

                    <mask id={letterMaskId} maskUnits="userSpaceOnUse">
                        <rect width="100%" height="100%" fill="white" />
                        <g transform="translate(70,200)">
                            <path
                                d="M82.6833 301.21H52.6133C21.6133 265.87 1.15332 210.38 1.15332 150.86C1.15332 96.6098 18.5133 39.5698 52.6133 0.819824H82.6833C56.9533 35.8498 39.2833 90.7198 39.2833 150.86C39.2833 205.73 54.4733 262.77 82.6833 301.21ZM124.415 242H86.5947V88.8598H121.625L124.725 108.7C134.335 93.1998 152.935 84.2098 173.705 84.2098C212.145 84.2098 231.985 108.08 231.985 147.76V242H194.165V156.75C194.165 131.02 181.455 118.62 161.925 118.62C138.675 118.62 124.415 134.74 124.415 159.54V242ZM244.653 165.12C244.653 117.38 279.063 84.5198 326.493 84.5198C373.923 84.5198 408.333 117.38 408.333 165.12C408.333 212.86 373.923 245.72 326.493 245.72C279.063 245.72 244.653 212.86 244.653 165.12ZM282.473 165.12C282.473 193.02 300.453 211.93 326.493 211.93C352.533 211.93 370.513 193.02 370.513 165.12C370.513 137.22 352.533 118.31 326.493 118.31C300.453 118.31 282.473 137.22 282.473 165.12ZM468.381 246.03C435.831 246.03 415.991 227.12 415.991 198.29C415.991 170.08 436.451 152.41 472.721 149.62L518.601 146.21V142.8C518.601 122.03 506.201 113.66 486.981 113.66C464.661 113.66 452.261 122.96 452.261 139.08H420.021C420.021 105.91 447.301 84.2098 488.841 84.2098C530.071 84.2098 555.491 106.53 555.491 149V242H522.321L519.531 219.37C513.021 235.18 492.251 246.03 468.381 246.03ZM480.781 217.51C504.031 217.51 518.911 203.56 518.911 180V171.94L486.981 174.42C463.421 176.59 454.431 184.34 454.431 196.74C454.431 210.69 463.731 217.51 480.781 217.51ZM673.245 88.2398V123.27H659.295C632.015 123.27 614.965 137.84 614.965 167.6V242H577.145V89.1698H612.795L614.965 111.49C621.475 96.2998 636.045 86.0698 656.505 86.0698C661.775 86.0698 667.045 86.6898 673.245 88.2398ZM693.885 301.21H663.815C692.335 262.77 707.215 205.73 707.215 150.86C707.215 90.7198 689.545 35.8498 663.815 0.819824H693.885C727.985 39.5698 745.655 96.6098 745.655 150.86C745.655 210.38 724.885 265.87 693.885 301.21Z"
                                fill="#101010"
                            />
                            <path
                                d="M83.4775 0.41748L83.0068 1.05811C57.3364 36.0073 39.6855 90.7898 39.6855 150.86C39.6855 205.669 54.8613 262.619 83.0078 300.972L83.4766 301.612H52.4316L52.3115 301.475C21.2385 266.052 0.75098 210.463 0.750977 150.86C0.750977 96.5362 18.1326 39.3939 52.3115 0.554199L52.4316 0.41748H83.4775ZM694.066 0.41748L694.187 0.554199C728.364 39.3928 746.057 96.5345 746.057 150.86C746.057 210.465 725.259 266.053 694.187 301.475L694.066 301.612H663.016L663.492 300.97C691.947 262.619 706.812 205.671 706.812 150.86C706.812 90.7895 689.161 36.0073 663.49 1.05811L663.021 0.41748H694.066ZM488.842 83.8081C509.526 83.8082 526.3 89.407 537.904 100.386C549.512 111.369 555.893 127.683 555.894 149V242.402H521.966L521.923 242.049L519.311 220.862C512.122 236.146 491.664 246.432 468.382 246.432C452.03 246.432 438.827 241.681 429.708 233.266C420.586 224.848 415.59 212.801 415.59 198.29C415.59 184.078 420.748 172.493 430.493 164.118C440.227 155.752 454.502 150.618 472.69 149.219H472.691L518.199 145.836V142.8C518.199 132.498 515.127 125.339 509.738 120.747C504.337 116.144 496.542 114.062 486.981 114.062C475.869 114.062 467.286 116.378 461.49 120.648C455.712 124.905 452.663 131.136 452.663 139.08V139.482H419.619V139.08C419.619 122.374 426.494 108.541 438.604 98.8921C450.704 89.2504 468.006 83.8081 488.842 83.8081ZM326.493 84.1177C350.303 84.1177 370.867 92.3667 385.48 106.629C400.095 120.893 408.735 141.15 408.735 165.12C408.735 189.09 400.095 209.346 385.48 223.61C370.867 237.873 350.303 246.122 326.493 246.122C302.684 246.122 282.12 237.872 267.507 223.61C252.892 209.346 244.252 189.09 244.252 165.12C244.252 141.15 252.892 120.893 267.507 106.629C282.12 92.3669 302.684 84.1177 326.493 84.1177ZM173.705 83.8081C193.011 83.8082 207.701 89.8055 217.56 100.837C227.411 111.862 232.387 127.859 232.387 147.76V242.402Ð¥193.763V156.75C193.763 143.946 190.6 134.522 185.068 128.303C179.542 122.091 171.602 119.022 161.925 119.022C150.398 119.022 141.134 123.015 134.749 130.05C128.36 137.09 124.816 147.215 124.816 159.54V242.402H86.1924V88.4575H121.969L122.021 88.7974L124.957 107.586C134.808 92.4992 153.231 83.8081 173.705 83.8081ZM487.013 174.821L487.012 174.82C475.262 175.903 467.212 178.374 462.107 182.069C457.03 185.744 454.833 190.655 454.833 196.74C454.833 203.618 457.121 208.681 461.459 212.039C465.816 215.41 472.3 217.108 480.781 217.108C492.326 217.108 501.75 213.646 508.285 207.301C514.819 200.959 518.51 191.693 518.51 180V172.374L487.013 174.821ZM326.493 118.711C313.575 118.711 302.679 123.4 295.011 131.528C287.341 139.658 282.875 151.257 282.875 165.12C282.875 178.983 287.341 190.582 295.011 198.711C302.679 206.839 313.575 211.528 326.493 211.528C339.412 211.528 350.309 206.839 357.977 198.711C365.646 190.582 370.111 178.982 370.111 165.12C370.111 151.257 365.646 139.658 357.977 131.528C350.309 123.4 339.412 118.711 326.493 118.711ZM673.647 123.671H659.296C645.724 123.671 634.754 127.296 627.179 134.565C619.606 141.832 615.367 152.797 615.367 167.6V242.402H576.743V88.7681H613.16L613.195 89.1313L615.219 109.945C622.075 95.3657 636.523 85.6675 656.506 85.6675C661.81 85.6675 667.113 86.2927 673.343 87.8501L673.647 87.9263V123.671Z"
                                fill="#101010"
                            />
                        </g>
                    </mask>
                </defs>

                <rect
                    width="100%"
                    height="100%"
                    fill={`url(#${blackGradientId})`}
                    mask={`url(#${letterMaskId})`}
                />
            </svg>

            <svg
                width="1000"
                height="700"
                viewBox="0 0 1000 700"
                preserveAspectRatio="xMidYMid meet"
                style={{
                    position: "absolute",
                    inset: 0,
                    zIndex: 10,
                    pointerEvents: "none",
                    mixBlendMode: "screen",
                }}
                aria-hidden
            >

                <defs>
                    <linearGradient
                        id={strokeGradientId}
                        x1="100%"
                        y1="0%"
                        x2="0%"
                        y2="100%"
                    >
                        <stop offset="0%" stopColor="white" stopOpacity="0.35" />
                        <stop offset="10%" stopColor="white" stopOpacity="0.25" />
                        <stop offset="40%" stopColor="white" stopOpacity="0.1" />
                        <stop offset="60%" stopColor="white" stopOpacity="0.1" />
                        <stop offset="90%" stopColor="white" stopOpacity="0.25" />
                        <stop offset="100%" stopColor="white" stopOpacity="0.35" />
                    </linearGradient>
                </defs>

                <g transform="translate(70,200)">
                    <path
                        d="M82.6833 301.21H52.6133C21.6133 265.87 1.15332 210.38 1.15332 150.86C1.15332 96.6098 18.5133 39.5698 52.6133 0.819824H82.6833C56.9533 35.8498 39.2833 90.7198 39.2833 150.86C39.2833 205.73 54.4733 262.77 82.6833 301.21ZM124.415 242H86.5947V88.8598H121.625L124.725 108.7C134.335 93.1998 152.935 84.2098 173.705 84.2098C212.145 84.2098 231.985 108.08 231.985 147.76V242H194.165V156.75C194.165 131.02 181.455 118.62 161.925 118.62C138.675 118.62 124.415 134.74 124.415 159.54V242ZM244.653 165.12C244.653 117.38 279.063 84.5198 326.493 84.5198C373.923 84.5198 408.333 117.38 408.333 165.12C408.333 212.86 373.923 245.72 326.493 245.72C279.063 245.72 244.653 212.86 244.653 165.12ZM282.473 165.12C282.473 193.02 300.453 211.93 326.493 211.93C352.533 211.93 370.513 193.02 370.513 165.12C370.513 137.22 352.533 118.31 326.493 118.31C300.453 118.31 282.473 137.22 282.473 165.12ZM468.381 246.03C435.831 246.03 415.991 227.12 415.991 198.29C415.991 170.08 436.451 152.41 472.721 149.62L518.601 146.21V142.8C518.601 122.03 506.201 113.66 486.981 113.66C464.661 113.66 452.261 122.96 452.261 139.08H420.021C420.021 105.91 447.301 84.2098 488.841 84.2098C530.071 84.2098 555.491 106.53 555.491 149V242H522.321L519.531 219.37C513.021 235.18 492.251 246.03 468.381 246.03ZM480.781 217.51C504.031 217.51 518.911 203.56 518.911 180V171.94L486.981 174.42C463.421 176.59 454.431 184.34 454.431 196.74C454.431 210.69 463.731 217.51 480.781 217.51ZM673.245 88.2398V123.27H659.295C632.015 123.27 614.965 137.84 614.965 167.6V242H577.145V89.1698H612.795L614.965 111.49C621.475 96.2998 636.045 86.0698 656.505 86.0698C661.775 86.0698 667.045 86.6898 673.245 88.2398ZM693.885 301.21H663.815C692.335 262.77 707.215 205.73 707.215 150.86C707.215 90.7198 689.545 35.8498 663.815 0.819824H693.885C727.985 39.5698 745.655 96.6098 745.655 150.86C745.655 210.38 724.885 265.87 693.885 301.21Z"
                        fill="none"
                        stroke={`url(#${strokeGradientId})`}
                        strokeWidth="1"
                    />
                    <path
                        d="M83.4775 0.41748L83.0068 1.05811C57.3364 36.0073 39.6855 90.7898 39.6855 150.86C39.6855 205.669 54.8613 262.619 83.0078 300.972L83.4766 301.612H52.4316L52.3115 301.475C21.2385 266.052 0.75098 210.463 0.750977 150.86C0.750977 96.5362 18.1326 39.3939 52.3115 0.554199L52.4316 0.41748H83.4775ZM694.066 0.41748L694.187 0.554199C728.364 39.3928 746.057 96.5345 746.057 150.86C746.057 210.465 725.259 266.053 694.187 301.475L694.066 301.612H663.016L663.492 300.97C691.947 262.619 706.812 205.671 706.812 150.86C706.812 90.7895 689.161 36.0073 663.49 1.05811L663.021 0.41748H694.066ZM488.842 83.8081C509.526 83.8082 526.3 89.407 537.904 100.386C549.512 111.369 555.893 127.683 555.894 149V242.402H521.966L521.923 242.049L519.311 220.862C512.122 236.146 491.664 246.432 468.382 246.432C452.03 246.432 438.827 241.681 429.708 233.266C420.586 224.848 415.59 212.801 415.59 198.29C415.59 184.078 420.748 172.493 430.493 164.118C440.227 155.752 454.502 150.618 472.69 149.219H472.691L518.199 145.836V142.8C518.199 132.498 515.127 125.339 509.738 120.747C504.337 116.144 496.542 114.062 486.981 114.062C475.869 114.062 467.286 116.378 461.49 120.648C455.712 124.905 452.663 131.136 452.663 139.08V139.482H419.619V139.08C419.619 122.374 426.494 108.541 438.604 98.8921C450.704 89.2504 468.006 83.8081 488.842 83.8081ZM326.493 84.1177C350.303 84.1177 370.867 92.3667 385.48 106.629C400.095 120.893 408.735 141.15 408.735 165.12C408.735 189.09 400.095 209.346 385.48 223.61C370.867 237.873 350.303 246.122 326.493 246.122C302.684 246.122 282.12 237.872 267.507 223.61C252.892 209.346 244.252 189.09 244.252 165.12C244.252 141.15 252.892 120.893 267.507 106.629C282.12 92.3669 302.684 84.1177 326.493 84.1177ZM173.705 83.8081C193.011 83.8082 207.701 89.8055 217.56 100.837C227.411 111.862 232.387 127.859 232.387 147.76V242.402H193.763V156.75C193.763 143.946 190.6 134.522 185.068 128.303C179.542 122.091 171.602 119.022 161.925 119.022C150.398 119.022 141.134 123.015 134.749 130.05C128.36 137.09 124.816 147.215 124.816 159.54V242.402H86.1924V88.4575H121.969L122.021 88.7974L124.957 107.586C134.808 92.4992 153.231 83.8081 173.705 83.8081ZM487.013 174.821L487.012 174.82C475.262 175.903 467.212 178.374 462.107 182.069C457.03 185.744 454.833 190.655 454.833 196.74C454.833 203.618 457.121 208.681 461.459 212.039C465.816 215.41 472.3 217.108 480.781 217.108C492.326 217.108 501.75 213.646 508.285 207.301C514.819 200.959 518.51 191.693 518.51 180V172.374L487.013 174.821ZM326.493 118.711C313.575 118.711 302.679 123.4 295.011 131.528C287.341 139.658 282.875 151.257 282.875 165.12C282.875 178.983 287.341 190.582 295.011 198.711C302.679 206.839 313.575 211.528 326.493 211.528C339.412 211.528 350.309 206.839 357.977 198.711C365.646 190.582 370.111 178.982 370.111 165.12C370.111 151.257 365.646 139.658 357.977 131.528C350.309 123.4 339.412 118.711 326.493 118.711ZM673.647 123.671H659.296C645.724 123.671 634.754 127.296 627.179 134.565C619.606 141.832 615.367 152.797 615.367 167.6V242.402H576.743V88.7681H613.16L613.195 89.1313L615.219 109.945C622.075 95.3657 636.523 85.6675 656.506 85.6675C661.81 85.6675 667.113 86.2927 673.343 87.8501L673.647 87.9263V123.671Z"
                        fill="none"
                        stroke={`url(#${strokeGradientId})`}
                        strokeWidth="1"
                    />
                </g>
            </svg>
        </div>
    );
}
